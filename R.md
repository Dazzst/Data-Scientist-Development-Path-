# R语言数据科学

## 🎯 概览：R是什么？

| 特性 | 描述 |
| :--- | :--- |
| **定义** | 专为统计计算、数据分析和图形设计而生的**编程语言与环境**。 |
| **核心优势** | 统计建模能力强大、图形可视化（`ggplot2`）精美、拥有庞大的**开源包生态**。 |
| **环境** | 推荐使用**RStudio**作为集成开发环境（IDE）。 |
| **赋值符号** | 核心赋值运算符是 `<-`（例如：`x <- 10`），而非 `=`。 |

## 📦 核心数据结构 (Data Structures)

R中的一切皆为对象。理解其数据结构是高效编程的关键。

| 结构 | 描述 | 示例代码 |
| :--- | :--- | :--- |
| **1. 向量 (Vector)** | 最基本的结构，存储**单一类型**（数值、字符、逻辑值）的数据集。 | `v <- c(1, 5, 8)` |
| **2. 矩阵 (Matrix)** | 二维数组，存储**单一类型**数据。常用于线性代数。 | `m <- matrix(1:4, nrow=2)` |
| **3. 数组 (Array)** | 多维数组，存储**单一类型**数据。 | `a <- array(1:8, dim=c(2, 2, 2))` |
| **4. 数据框 (Data Frame)** | **最常用结构**。列是向量，每列可存储**不同类型**数据（如表格）。 | `df <- data.frame(ID, Value)` |
| **5. 列表 (List)** | **最灵活结构**。可包含任何R对象（向量、矩阵、数据框、甚至其他列表）。 | `l <- list(v, df, "Text")` |

## 🛠️ 数据处理与转换 (Tidyverse - Dplyr)

现代R语言主要通过 **Tidyverse** 库集合进行数据处理。`dplyr` 包是其中的核心。

| 动词 (Verb) | 功能描述 | 示例 (使用管道操作符 `|>` 或 `%>%`) |
| :--- | :--- | :--- |
| `filter()` | 筛选：按条件**选取行**。 | `df |> filter(Age > 30)` |
| `select()` | 选择：按名称**选取列**。 | `df |> select(Name, Age)` |
| `mutate()` | 转换：**创建新列**或修改现有列。 | `df |> mutate(BMI = Weight / Height^2)` |
| `arrange()` | 排序：按列值对行进行排序。 | `df |> arrange(desc(Score))` |
| `group_by()` | 分组：将数据按一列或多列分组。 | `df |> group_by(City)` |
| `summarise()` | 汇总：对分组后的数据进行**聚合计算**（如求平均值）。 | `df |> summarise(Avg_Age = mean(Age))` |
| **管道** | 连接多个操作步骤，使代码更具可读性。 | `df |> group_by(A) |> summarise(B = max(B))` |

## 📊 数据可视化 (Ggplot2)

`ggplot2` 基于**图形语法 (Grammar of Graphics)**，通过图层叠加创建图形。

| 概念 | 描述 | 核心函数/参数 |
| :--- | :--- | :--- |
| **数据 (Data)** | 绘图所需的数据框。 | `ggplot(data = df, ...)` |
| **映射 (Aesthetics, aes)** | 将数据变量映射到视觉特征（如 X/Y 轴、颜色、大小）。 | `aes(x = Var1, y = Var2, color = Group)` |
| **几何对象 (Geom)** | 定义图形的类型（点、线、柱等）。 | `+ geom_point()` (散点图) |
| **统计变换 (Stat)** | 对数据进行统计汇总（如直方图的计数）。 | `+ stat_smooth()` (平滑曲线) |
| **坐标系 (Coord)** | 定义坐标系类型（笛卡尔、极坐标等）。 | `+ coord_flip()` |
| **分面 (Facet)** | 将图形按某个变量的水平拆分成多个小图。 | `+ facet_wrap(~Group)` |

## 📉 统计建模 (Statistical Modeling)

R是统计建模的首选工具。

| 模型 | 函数 | 描述 |
| :--- | :--- | :--- |
| **线性回归** | `lm()` (Linear Model) | 拟合线性关系。 `model <- lm(y ~ x1 + x2, data = df)` |
| **广义线性模型** | `glm()` (Generalized Linear Model) | 拟合非正态分布响应变量（如逻辑回归）。 |
| **模型信息** | `summary()` | 查看模型的详细统计信息（系数、p值等）。 |
| **诊断图** | `plot(model)` | 绘制诊断图，检查模型的假设是否满足。 |
| **预测** | `predict()` | 使用拟合的模型对新数据进行预测。 |

## 📚 常用函数与技巧

| 类型 | 函数/符号 | 作用 |
| :--- | :--- | :--- |
| **注释** | `#` | 单行注释。 |
| **包管理** | `install.packages("pkg")` | 安装新的R包。 |
| **包管理** | `library(pkg)` | 加载已安装的R包以供使用。 |
| **序列生成** | `1:5` 或 `seq(1, 5)` | 生成数字序列 `1, 2, 3, 4, 5`。 |
| **组合** | `c()` | 创建向量（`combine`）。 |
| **结构查看** | `str()` | 查看任何R对象的内部结构和类型（非常有用）。 |
| **表格查看** | `head()` / `tail()` | 查看数据框的前几行或后几行。 |
